<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CFP - Controle Financeiro Pessoal</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=dark_mode,light_mode" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>
<body>
    <header>
        <button id="hamburger-menu" class="hamburger-menu">
            <span></span>
            <span></span>
            <span></span>
        </button>
        <h1>CFP</h1>
        <button id="toggle-theme">Modo Escuro</button>
    </header>

    <nav id="sidebar" class="sidebar">
        <ul class="nav-list">
            <li><a href="#dashboard" class="nav-link active" data-section="dashboard">Dashboard</a></li>
            <li><a href="#transacoes" class="nav-link" data-section="transacoes">Transa√ß√µes</a></li>
            <li><a href="#categorias" class="nav-link" data-section="categorias">Categorias</a></li>
            <li><a href="#lixeira" class="nav-link" data-section="lixeira">Lixeira</a></li>
            <li><a href="#graficos" class="nav-link" data-section="graficos">Gr√°ficos</a></li>
            <li><a href="#conta" class="nav-link" data-section="conta">Conta</a></li>
        </ul>
    </nav>

    <main>
        <section id="dashboard" class="content-section active">
            <h2>Dashboard</h2>
            <div class="dashboard">
                <div class="card saldo">
                    <h3>Saldo Atual</h3>
                    <p id="saldo-atual">R$ 0,00</p>
                </div>
                <div class="card entradas">
                    <h3>Total de Entradas</h3>
                    <p id="total-entradas">R$ 0,00</p>
                </div>
                <div class="card saidas">
                    <h3>Total de Sa√≠das</h3>
                    <p id="total-saidas">R$ 0,00</p>
                </div>
                <div class="card investimentos">
                    <h3>Total de Investimentos</h3>
                    <p id="total-investimentos">R$ 0,00</p>
                </div>
                <div class="card resumo">
                    <h3>Resumo do M√™s</h3>
                    <p id="resumo-mes">Entradas: R$ 0,00<br>Sa√≠das: R$ 0,00</p>
                </div>
            </div>

            <!-- Mensagem de recomenda√ß√£o de poupan√ßa -->
            <div id="recomendacao-poupanca" class="recomendacao-poupanca" style="display: none;">
                <div class="poupanca-card">
                    <h3>üí∞ Recomenda√ß√£o de Poupan√ßa</h3>
                    <div id="poupanca-conteudo" class="poupanca-conteudo">
                        <!-- Conte√∫do ser√° inserido dinamicamente -->
                    </div>
                </div>
            </div>
        </section>

        <section id="transacoes" class="content-section">
            <h2>Transa√ß√µes</h2>

            <!-- Se√ß√£o explicativa -->
            <div class="transacoes-intro">
                <div class="intro-card">
                    <h3>üí° Como controlar suas finan√ßas</h3>
                    <p>Registre todas as suas receitas (entradas) e despesas (sa√≠das) para ter uma vis√£o completa do seu dinheiro.</p>
                    <ul>
                        <li><strong>Entradas:</strong> Sal√°rio, freelas, investimentos, etc.</li>
                        <li><strong>Sa√≠das:</strong> Alimenta√ß√£o, transporte, moradia, lazer, etc.</li>
                    </ul>
                </div>

                <div class="intro-card">
                    <h3>üìä Dicas importantes</h3>
                    <ul>
                        <li>Seja espec√≠fico nas descri√ß√µes (ex: "Caf√© da manh√£" ao inv√©s de "Comida")</li>
                        <li>Use categorias para agrupar gastos similares</li>
                        <li>Registre tudo! At√© os pequenos gastos fazem diferen√ßa</li>
                        <li>Revise suas transa√ß√µes mensalmente para identificar padr√µes</li>
                    </ul>
                </div>
            </div>

            <!-- A√ß√µes r√°pidas -->
            <div class="acoes-rapidas">
                <button id="btn-adicionar-transacao" class="btn-primary">
                    ‚ûï Adicionar Transa√ß√£o
                </button>
                <div class="resumo-rapido">
                    <span id="total-transacoes">0 transa√ß√µes</span>
                    <span id="periodo-atual">Este m√™s</span>
                </div>
            </div>

            <!-- Filtros avan√ßados -->
            <div class="filtros-container">
                <h3>üîç Filtrar Transa√ß√µes</h3>
                <div class="filtros">
                    <div class="filtro-grupo">
                        <label for="busca">Buscar por descri√ß√£o:</label>
                        <input type="text" id="busca" placeholder="Ex: gasolina, sal√°rio, mercado...">
                    </div>
                    <div class="filtro-grupo">
                        <label for="filtro-categoria">Categoria:</label>
                        <select id="filtro-categoria">
                            <option value="">Todas as Categorias</option>
                        </select>
                    </div>
                    <div class="filtro-grupo">
                        <label for="filtro-tipo">Tipo:</label>
                        <select id="filtro-tipo">
                            <option value="">Todos os Tipos</option>
                            <option value="entrada">Entrada (+)</option>
                            <option value="saida">Sa√≠da (-)</option>
                            <option value="investimento">Investimento (üí∞)</option>
                        </select>
                    </div>
                    <div class="filtro-grupo">
                        <label for="filtro-mes" title="Filtrar transa√ß√µes por m√™s e ano espec√≠ficos">Per√≠odo (m√™s/ano):</label>
                        <input type="month" id="filtro-mes" title="Selecione um m√™s e ano para ver apenas transa√ß√µes desse per√≠odo">
                    </div>
                </div>
                <div class="filtros-info">
                    <small><strong></strong>Dica:</strong> Use os filtros para encontrar transa√ß√µes espec√≠ficas rapidamente. O filtro de <strong>per√≠odo</strong> permite ver apenas transa√ß√µes de um m√™s/ano espec√≠fico.</small>
                </div>
            </div>

            <!-- Tabela de transa√ß√µes -->
            <div class="tabela-container">
                <div class="tabela-header">
                    <h3>üìã Suas Transa√ß√µes</h3>
                    <div class="tabela-stats">
                        <span id="transacoes-filtradas">Mostrando todas</span>
                    </div>
                </div>

                <div class="tabela-responsive">
                    <table id="tabela-transacoes">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Descri√ß√£o</th>
                                <th>Categoria</th>
                                <th>Tipo</th>
                                <th>Valor</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Transa√ß√µes ser√£o inseridas aqui -->
                        </tbody>
                    </table>
                </div>

                <div id="nenhuma-transacao" class="nenhuma-transacao" style="display: none;">
                    <div class="empty-state">
                        <div class="empty-icon">üìù</div>
                        <h3>Nenhuma transa√ß√£o encontrada</h3>
                        <p>Comece adicionando sua primeira transa√ß√£o financeira!</p>
                        <button id="btn-adicionar-primeira" class="btn-primary">Adicionar Primeira Transa√ß√£o</button>
                    </div>
                </div>
            </div>
        </section>

        <section id="categorias" class="content-section">
            <h2>Categorias</h2>
            <button id="btn-adicionar-categoria">Adicionar Categoria</button>
            <ul id="lista-categorias">
                <!-- Categorias ser√£o inseridas aqui -->
            </ul>
        </section>

        <section id="lixeira" class="content-section">
            <h2>Lixeira</h2>
            <p class="lixeira-info">Aqui ficam as transa√ß√µes exclu√≠das. Voc√™ pode restaur√°-las ou exclu√≠-las permanentemente.</p>

            <div class="lixeira-acoes">
                <span id="total-lixeira">0 itens na lixeira</span>
            </div>

            <div class="lixeira-container">
                <table id="tabela-lixeira">
                    <thead>
                        <tr>
                            <th>Data</th>
                            <th>Descri√ß√£o</th>
                            <th>Categoria</th>
                            <th>Tipo</th>
                            <th>Valor</th>
                            <th>Data de Exclus√£o</th>
                            <th>A√ß√µes</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Transa√ß√µes na lixeira ser√£o inseridas aqui -->
                    </tbody>
                </table>
            </div>

            <div id="lixeira-vazia" class="empty-state" style="display: none;">
                <div class="empty-icon">üóëÔ∏è</div>
                <h3>Lixeira vazia</h3>
                <p>N√£o h√° transa√ß√µes exclu√≠das no momento.</p>
            </div>
        </section>

        <section id="graficos" class="content-section">
            <h2>Seus Recursos Financeiros</h2>

            <!-- Gr√°fico principal -->
            <div class="grafico-container">
                <canvas id="grafico-gastos"></canvas>
            </div>

            <!-- Informa√ß√µes separadas do gr√°fico -->
            <div class="grafico-info">
                <div class="info-cards">
                    <div class="info-card">
                        <div class="card-icon">üí∞</div>
                        <div class="card-content">
                            <h4>Saldo Atual</h4>
                            <p id="info-saldo" class="valor-principal">R$ 0,00</p>
                            <small id="info-saldo-status">Sem dados</small>
                        </div>
                    </div>

                    <div class="info-card">
                        <div class="card-icon">üìà</div>
                        <div class="card-content">
                            <h4>Total de Entradas</h4>
                            <p id="info-entradas" class="valor-positivo">R$ 0,00</p>
                            <small>Receitas totais</small>
                        </div>
                    </div>

                    <div class="info-card">
                        <div class="card-icon">üìâ</div>
                        <div class="card-content">
                            <h4>Total de Sa√≠das</h4>
                            <p id="info-saidas" class="valor-negativo">R$ 0,00</p>
                            <small>Despesas totais</small>
                        </div>
                    </div>

                    <div class="info-card">
                        <div class="card-icon">üí∞</div>
                        <div class="card-content">
                            <h4>Total de Investimentos</h4>
                            <p id="info-investimentos" class="valor-positivo">R$ 0,00</p>
                            <small>Poupan√ßa aplicada</small>
                        </div>
                    </div>

                    <div class="info-card">
                        <div class="card-icon">üìä</div>
                        <div class="card-content">
                            <h4>Percentual Gasto</h4>
                            <p id="info-percentual" class="valor-percentual">0%</p>
                            <small id="info-percentual-status">Dos recursos dispon√≠veis</small>
                        </div>
                    </div>
                </div>

                <!-- An√°lise financeira -->
                <div class="analise-financeira">
                    <h3>üìà An√°lise da Sua Situa√ß√£o Financeira</h3>
                    <div id="analise-texto" class="analise-texto">
                        <p>Adicione algumas transa√ß√µes para ver sua an√°lise financeira completa.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="conta" class="content-section">
            <h2>Conta</h2>

            <!-- Perfil do usu√°rio -->
            <div class="perfil-usuario">
                <div class="perfil-info-card">
                    <h3>üë§ Perfil do Usu√°rio</h3>
                    <div class="perfil-conteudo">
                        <div class="foto-perfil">
                            <img id="foto-perfil" src="" alt="Foto de perfil" style="display: none;" onerror="this.style.display='none';">
                            <div id="placeholder-foto" class="placeholder-foto">üì∑</div>
                            <input type="file" id="input-foto-perfil" accept="image/*" style="display: none;">
                            <button id="btn-alterar-foto" class="btn-secondary" title="Alterar foto de perfil">üì∑ Alterar Foto</button>
                        </div>
                        <div class="info-usuario">
                            <div class="campo-usuario">
                                <label for="nome-usuario">Nome:</label>
                                <input type="text" id="nome-usuario" placeholder="Digite seu nome" maxlength="50">
                                <button id="btn-salvar-nome" class="btn-secondary">üíæ Salvar</button>
                            </div>
                            <div class="info-conta">
                                <p><strong>Data de cria√ß√£o:</strong> <span id="data-criacao">Carregando...</span></p>
                                <p><strong>Status da conta:</strong> <span style="color: var(--success-color);">Ativa ‚úÖ</span></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Backup Manual -->
            <div class="backup-manual">
                <div class="backup-info-card">
                    <h3>üíæ Backup Manual</h3>
                    <p>Gerencie seus dados financeiros com backup manual. Exporte seus dados para salvar em outro local ou importe dados de backup anterior.</p>
                    <div class="backup-buttons">
                        <button id="btn-exportar">üì§ Exportar Dados</button>
                        <input type="file" id="input-importar" accept=".json" style="display: none;">
                        <button id="btn-importar">üì• Importar Dados</button>
                    </div>
                </div>
            </div>

            <!-- Or√ßamento mensal -->
            <div class="orcamento-mensal">
                <div class="orcamento-card">
                    <h3>üéØ Or√ßamento Mensal</h3>
                    <p>Defina limites para seus gastos mensais e receba alertas autom√°ticos.</p>
                    <div class="orcamento-config">
                        <div class="orcamento-total">
                            <label for="orcamento-total">Or√ßamento Total Mensal:</label>
                            <div class="input-group">
                                <span class="currency">R$</span>
                                <input type="number" id="orcamento-total" placeholder="0,00" step="0.01" min="0">
                            </div>
                        </div>
                        <div class="orcamento-categorias">
                            <h4>Or√ßamento por Categoria:</h4>
                            <div id="orcamento-categorias-list">
                                <!-- Categorias ser√£o adicionadas dinamicamente -->
                            </div>
                        </div>
                        <button id="btn-salvar-orcamento" class="btn-secondary">üíæ Salvar Or√ßamento</button>
                    </div>
                </div>
            </div>

            <!-- Configura√ß√µes de conta -->
            <div class="configuracoes-conta">
                <div class="configuracoes-card">
                    <h3>‚öôÔ∏è Configura√ß√µes da Conta</h3>
                    <p>A√ß√µes irrevers√≠veis que afetam todos os seus dados.</p>
                    <div class="acoes-perigosas">
                        <button id="btn-limpar-dados" class="danger">üóëÔ∏è Limpar Todos os Dados</button>
                        <p class="aviso-perigo"><small>‚ö†Ô∏è Esta a√ß√£o excluir√° permanentemente todas as transa√ß√µes, categorias e configura√ß√µes. N√£o poder√° ser desfeita!</small></p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Modal para adicionar/editar transa√ß√£o -->
    <div id="modal-transacao" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3 id="modal-title">Adicionar Transa√ß√£o</h3>
            <form id="form-transacao">
                <input type="hidden" id="transacao-id">
                <label for="data">Data:</label>
                <input type="date" id="data" required>
                <label for="descricao">Descri√ß√£o:</label>
                <input type="text" id="descricao" required>
                <label for="categoria">Categoria:</label>
                <select id="categoria" required>
                    <!-- Categorias ser√£o inseridas aqui -->
                </select>
                <label for="tipo">Tipo:</label>
                <select id="tipo" required>
                    <option value="entrada">Entrada</option>
                    <option value="saida">Sa√≠da</option>
                    <option value="investimento">Investimento</option>
                </select>
                <label for="valor">Valor:</label>
                <input type="number" id="valor" step="0.01" min="0" required>
                <button type="submit">Salvar</button>
            </form>
        </div>
    </div>

    <!-- Modal para adicionar/editar categoria -->
    <div id="modal-categoria" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3 id="modal-categoria-title">Adicionar Categoria</h3>
            <form id="form-categoria">
                <input type="hidden" id="categoria-id">
                <label for="nome-categoria">Nome:</label>
                <input type="text" id="nome-categoria" required>
                <button type="submit">Salvar</button>
            </form>
        </div>
    </div>

    <script src="js/storage.js"></script>
    <script src="js/transactions.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
