<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CFP - Controle Financeiro Pessoal</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=dark_mode,light_mode" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>
<body>
    <header>
        <button id="hamburger-menu" class="hamburger-menu">
            <span></span>
            <span></span>
            <span></span>
        </button>
        <h1>CFP</h1>
        <button id="toggle-theme">Modo Escuro</button>
    </header>

    <nav id="sidebar" class="sidebar">
        <ul class="nav-list">
            <li><a href="#dashboard" class="nav-link active" data-section="dashboard">Dashboard</a></li>
            <li><a href="#transacoes" class="nav-link" data-section="transacoes">TransaÃ§Ãµes</a></li>
            <li><a href="#categorias" class="nav-link" data-section="categorias">Categorias</a></li>
            <li><a href="#lixeira" class="nav-link" data-section="lixeira">Lixeira</a></li>
            <li><a href="#graficos" class="nav-link" data-section="graficos">GrÃ¡ficos</a></li>
            <li><a href="#relatorio" class="nav-link" data-section="relatorio">RelatÃ³rio</a></li>
            <li><a href="#conta" class="nav-link" data-section="conta">Conta</a></li>
        </ul>
    </nav>

    <main>
        <section id="dashboard" class="content-section active">
            <h2>Dashboard</h2>
            <div class="dashboard">
                <div class="card saldo">
                    <h3>Saldo Atual</h3>
                    <p id="saldo-atual">R$ 0,00</p>
                </div>
                <div class="card entradas">
                    <h3>Total de Entradas</h3>
                    <p id="total-entradas">R$ 0,00</p>
                </div>
                <div class="card saidas">
                    <h3>Total de SaÃ­das</h3>
                    <p id="total-saidas">R$ 0,00</p>
                </div>
                <div class="card investimentos">
                    <h3>Total de Investimentos</h3>
                    <p id="total-investimentos">R$ 0,00</p>
                </div>
                <div class="card resumo">
                    <h3>Resumo do MÃªs</h3>
                    <p id="resumo-mes">Entradas: R$ 0,00<br>SaÃ­das: R$ 0,00</p>
                </div>
            </div>

            <!-- Mensagem de recomendaÃ§Ã£o de poupanÃ§a -->
            <div id="recomendacao-poupanca" class="recomendacao-poupanca" style="display: none;">
                <div class="poupanca-card">
                    <h3>ğŸ’° RecomendaÃ§Ã£o de PoupanÃ§a</h3>
                    <div id="poupanca-conteudo" class="poupanca-conteudo">
                        <!-- ConteÃºdo serÃ¡ inserido dinamicamente -->
                    </div>
                </div>
            </div>
        </section>

        <section id="transacoes" class="content-section">
            <h2>TransaÃ§Ãµes</h2>

            <!-- SeÃ§Ã£o explicativa (oculta) -->
            <div class="transacoes-intro hidden">
                <div class="intro-card">
                    <h3>ğŸ’¡ Como controlar suas finanÃ§as</h3>
                    <p>Registre todas as suas receitas (entradas) e despesas (saÃ­das) para ter uma visÃ£o completa do seu dinheiro.</p>
                    <ul>
                        <li><strong>Entradas:</strong> SalÃ¡rio, freelas, investimentos, etc.</li>
                        <li><strong>SaÃ­das:</strong> AlimentaÃ§Ã£o, transporte, moradia, lazer, etc.</li>
                    </ul>
                </div>

                <div class="intro-card">
                    <h3>ğŸ“Š Dicas importantes</h3>
                    <ul>
                        <li>Seja especÃ­fico nas descriÃ§Ãµes (ex: "CafÃ© da manhÃ£" ao invÃ©s de "Comida")</li>
                        <li>Use categorias para agrupar gastos similares</li>
                        <li>Registre tudo! AtÃ© os pequenos gastos fazem diferenÃ§a</li>
                        <li>Revise suas transaÃ§Ãµes mensalmente para identificar padrÃµes</li>
                    </ul>
                </div>
            </div>

            <!-- AÃ§Ãµes rÃ¡pidas -->
            <div class="acoes-rapidas">
                <button id="btn-adicionar-transacao" class="btn-primary">
                    â• Adicionar TransaÃ§Ã£o
                </button>
                <div class="resumo-rapido">
                    <span id="total-transacoes">0 transaÃ§Ãµes</span>
                    <span id="periodo-atual">Este mÃªs</span>
                </div>
            </div>

            <!-- Filtros avanÃ§ados -->
            <div class="filtros-container">
                <h3>ğŸ” Filtrar TransaÃ§Ãµes</h3>
                <div class="filtros">
                    <div class="filtro-grupo">
                        <label for="busca">Buscar por descriÃ§Ã£o:</label>
                        <input type="text" id="busca" placeholder="Ex: gasolina, salÃ¡rio, mercado...">
                    </div>
                    <div class="filtro-grupo">
                        <label for="filtro-categoria">Categoria:</label>
                        <select id="filtro-categoria">
                            <option value="">Todas as Categorias</option>
                        </select>
                    </div>
                    <div class="filtro-grupo">
                        <label for="filtro-tipo">Tipo:</label>
                        <select id="filtro-tipo">
                            <option value="">Todos os Tipos</option>
                            <option value="entrada">Entrada (+)</option>
                            <option value="saida">SaÃ­da (-)</option>
                            <option value="investimento">Investimento (ğŸ’°)</option>
                        </select>
                    </div>
                    <div class="filtro-grupo">
                        <label for="filtro-mes" title="Filtrar transaÃ§Ãµes por mÃªs e ano especÃ­ficos">PerÃ­odo (mÃªs/ano):</label>
                        <input type="month" id="filtro-mes" title="Selecione um mÃªs e ano para ver apenas transaÃ§Ãµes desse perÃ­odo">
                    </div>
                </div>
                <div class="filtros-info">
                    <small><strong></strong>Dica:</strong> Use os filtros para encontrar transaÃ§Ãµes especÃ­ficas rapidamente. O filtro de <strong>perÃ­odo</strong> permite ver apenas transaÃ§Ãµes de um mÃªs/ano especÃ­fico.</small>
                </div>
            </div>

            <!-- Tabela de transaÃ§Ãµes -->
            <div class="tabela-container">
                <div class="tabela-header">
                    <h3>ğŸ“‹ Suas TransaÃ§Ãµes</h3>
                    <div class="tabela-stats">
                        <span id="transacoes-filtradas">Mostrando todas</span>
                    </div>
                </div>

                <div class="tabela-responsive">
                    <table id="tabela-transacoes">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>DescriÃ§Ã£o</th>
                                <th>Categoria</th>
                                <th>Tipo</th>
                                <th>Valor</th>
                                <th>AÃ§Ãµes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- TransaÃ§Ãµes serÃ£o inseridas aqui -->
                        </tbody>
                    </table>
                </div>

                <div id="nenhuma-transacao" class="nenhuma-transacao" style="display: none;">
                    <div class="empty-state">
                        <div class="empty-icon">ğŸ“</div>
                        <h3>Nenhuma transaÃ§Ã£o encontrada</h3>
                        <p>Comece adicionando sua primeira transaÃ§Ã£o financeira!</p>
                        <button id="btn-adicionar-primeira" class="btn-primary">Adicionar Primeira TransaÃ§Ã£o</button>
                    </div>
                </div>
            </div>
        </section>

        <section id="categorias" class="content-section">
            <h2>Categorias</h2>
            <button id="btn-adicionar-categoria">Adicionar Categoria</button>
            <ul id="lista-categorias">
                <!-- Categorias serÃ£o inseridas aqui -->
            </ul>
        </section>

        <section id="lixeira" class="content-section">
            <h2>Lixeira</h2>
            <p class="lixeira-info">Aqui ficam as transaÃ§Ãµes excluÃ­das. VocÃª pode restaurÃ¡-las ou excluÃ­-las permanentemente.</p>

            <div class="lixeira-acoes">
                <span id="total-lixeira">0 itens na lixeira</span>
            </div>

            <div class="lixeira-container">
                <table id="tabela-lixeira">
                    <thead>
                        <tr>
                            <th>Data</th>
                            <th>DescriÃ§Ã£o</th>
                            <th>Categoria</th>
                            <th>Tipo</th>
                            <th>Valor</th>
                            <th>Data de ExclusÃ£o</th>
                            <th>AÃ§Ãµes</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- TransaÃ§Ãµes na lixeira serÃ£o inseridas aqui -->
                    </tbody>
                </table>
            </div>

            <div id="lixeira-vazia" class="empty-state" style="display: none;">
                <div class="empty-icon">ğŸ—‘ï¸</div>
                <h3>Lixeira vazia</h3>
                <p>NÃ£o hÃ¡ transaÃ§Ãµes excluÃ­das no momento.</p>
            </div>
        </section>

        <section id="graficos" class="content-section">
            <h2>Seus Recursos Financeiros</h2>

            <!-- GrÃ¡fico principal -->
            <div class="grafico-container">
                <canvas id="grafico-gastos"></canvas>
            </div>

            <!-- InformaÃ§Ãµes separadas do grÃ¡fico -->
            <div class="grafico-info">
                <div class="info-cards">
                    <div class="info-card">
                        <div class="card-icon">ğŸ’°</div>
                        <div class="card-content">
                            <h4>Saldo Atual</h4>
                            <p id="info-saldo" class="valor-principal">R$ 0,00</p>
                            <small id="info-saldo-status">Sem dados</small>
                        </div>
                    </div>

                    <div class="info-card">
                        <div class="card-icon">ğŸ“ˆ</div>
                        <div class="card-content">
                            <h4>Total de Entradas</h4>
                            <p id="info-entradas" class="valor-positivo">R$ 0,00</p>
                            <small>Receitas totais</small>
                        </div>
                    </div>

                    <div class="info-card">
                        <div class="card-icon">ğŸ“‰</div>
                        <div class="card-content">
                            <h4>Total de SaÃ­das</h4>
                            <p id="info-saidas" class="valor-negativo">R$ 0,00</p>
                            <small>Despesas totais</small>
                        </div>
                    </div>

                    <div class="info-card">
                        <div class="card-icon">ğŸ’°</div>
                        <div class="card-content">
                            <h4>Total de Investimentos</h4>
                            <p id="info-investimentos" class="valor-positivo">R$ 0,00</p>
                            <small>PoupanÃ§a aplicada</small>
                        </div>
                    </div>

                    <div class="info-card">
                        <div class="card-icon">ğŸ“Š</div>
                        <div class="card-content">
                            <h4>Percentual Gasto</h4>
                            <p id="info-percentual" class="valor-percentual">0%</p>
                            <small id="info-percentual-status">Dos recursos disponÃ­veis</small>
                        </div>
                    </div>
                </div>

                <!-- AnÃ¡lise financeira -->
                <div class="analise-financeira">
                    <h3>ğŸ“ˆ AnÃ¡lise da Sua SituaÃ§Ã£o Financeira</h3>
                    <div id="analise-texto" class="analise-texto">
                        <p>Adicione algumas transaÃ§Ãµes para ver sua anÃ¡lise financeira completa.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="relatorio" class="content-section">
            <h2>ğŸ“Š RelatÃ³rio Financeiro</h2>

            <div class="relatorio-container">
                <div class="relatorio-controls">
                    <div class="relatorio-selector">
                        <h3>ğŸ“… Selecione o PerÃ­odo</h3>
                        <div class="mes-selector">
                            <label for="relatorio-mes">MÃªs/Ano do RelatÃ³rio:</label>
                            <select id="relatorio-mes">
                                <option value="">Carregando meses...</option>
                            </select>
                        </div>
                        <button id="btn-gerar-relatorio" class="btn-primary">ğŸ“‹ Gerar RelatÃ³rio</button>
                        <button id="btn-exportar-relatorio" class="btn-secondary" style="display: none;">ğŸ“¤ Exportar RelatÃ³rio</button>
                    </div>

                    <div class="relatorio-info">
                        <div class="info-card">
                            <h4>ğŸ’¡ Sobre o RelatÃ³rio</h4>
                            <p>Selecione um mÃªs e ano para gerar um relatÃ³rio completo contendo:</p>
                            <ul>
                                <li>ğŸ“Š Todas as transaÃ§Ãµes do perÃ­odo</li>
                                <li>ğŸ“ˆ GrÃ¡fico visual das movimentaÃ§Ãµes</li>
                                <li>ğŸ“‹ Tabela formatada para impressÃ£o</li>
                                <li>ğŸ’° Resumo financeiro do mÃªs</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div id="relatorio-resultado" class="relatorio-resultado" style="display: none;">
                    <div class="relatorio-header">
                        <h3 id="relatorio-titulo">RelatÃ³rio Financeiro - Janeiro 2024</h3>
                        <div class="relatorio-resumo">
                            <div class="resumo-item">
                                <span class="label">Total de Entradas:</span>
                                <span id="relatorio-entradas" class="valor positivo">R$ 0,00</span>
                            </div>
                            <div class="resumo-item">
                                <span class="label">Total de SaÃ­das:</span>
                                <span id="relatorio-saidas" class="valor negativo">R$ 0,00</span>
                            </div>
                            <div class="resumo-item">
                                <span class="label">Total de Investimentos:</span>
                                <span id="relatorio-investimentos" class="valor positivo">R$ 0,00</span>
                            </div>
                            <div class="resumo-item">
                                <span class="label">Saldo do MÃªs:</span>
                                <span id="relatorio-saldo" class="valor">R$ 0,00</span>
                            </div>
                            <div class="resumo-item">
                                <span class="label">Total de TransaÃ§Ãµes:</span>
                                <span id="relatorio-total-transacoes" class="valor">0</span>
                            </div>
                        </div>
                    </div>

                    <!-- GrÃ¡fico do relatÃ³rio -->
                    <div class="relatorio-grafico">
                        <h4>ğŸ“Š MovimentaÃ§Ãµes Financeiras</h4>
                        <canvas id="grafico-relatorio"></canvas>
                    </div>

                    <!-- Tabela do relatÃ³rio -->
                    <div class="relatorio-tabela">
                        <h4>ğŸ“‹ Detalhes das TransaÃ§Ãµes</h4>
                        <div class="tabela-responsive">
                            <table id="tabela-relatorio">
                                <thead>
                                    <tr>
                                        <th>Data</th>
                                        <th>DescriÃ§Ã£o</th>
                                        <th>Categoria</th>
                                        <th>Tipo</th>
                                        <th>Valor</th>
                                    </tr>
                                </thead>
                                <tbody id="relatorio-transacoes-body">
                                    <!-- TransaÃ§Ãµes serÃ£o inseridas aqui -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="conta" class="content-section">
            <h2>Conta</h2>

            <!-- Perfil do usuÃ¡rio -->
            <div class="perfil-usuario">
                <div class="perfil-info-card">
                    <h3>ğŸ‘¤ Perfil do UsuÃ¡rio</h3>
                    <div class="perfil-conteudo">
                        <div class="foto-perfil">
                            <img id="foto-perfil" src="" alt="Foto de perfil" style="display: none;" onerror="this.style.display='none';">
                            <div id="placeholder-foto" class="placeholder-foto">ğŸ“·</div>
                            <input type="file" id="input-foto-perfil" accept="image/*" style="display: none;">
                            <button id="btn-alterar-foto" class="btn-secondary" title="Alterar foto de perfil">ğŸ“· Alterar Foto</button>
                        </div>
                        <div class="info-usuario">
                            <div class="campo-usuario">
                                <label for="nome-usuario">Nome:</label>
                                <input type="text" id="nome-usuario" placeholder="Digite seu nome" maxlength="50">
                                <button id="btn-salvar-nome" class="btn-secondary">ğŸ’¾ Salvar</button>
                            </div>
                            <div class="info-conta">
                                <p><strong>Data de criaÃ§Ã£o:</strong> <span id="data-criacao">Carregando...</span></p>
                                <p><strong>Status da conta:</strong> <span style="color: var(--success-color);">Ativa âœ…</span></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Backup Manual -->
            <div class="backup-manual">
                <div class="backup-info-card">
                    <h3>ğŸ’¾ Backup Manual</h3>
                    <p>Gerencie seus dados financeiros com backup manual. Exporte seus dados para salvar em outro local ou importe dados de backup anterior.</p>
                    <div class="backup-buttons">
                        <button id="btn-exportar">ğŸ“¤ Exportar Dados</button>
                        <input type="file" id="input-importar" accept=".json" style="display: none;">
                        <button id="btn-importar">ğŸ“¥ Importar Dados</button>
                    </div>
                </div>
            </div>

            <!-- OrÃ§amento mensal -->
            <div class="orcamento-mensal">
                <div class="orcamento-card">
                    <h3>ğŸ¯ OrÃ§amento Mensal</h3>
                    <p>Defina limites para seus gastos mensais e receba alertas automÃ¡ticos.</p>
                    <div class="orcamento-config">
                        <div class="orcamento-total">
                            <label for="orcamento-total">OrÃ§amento Total Mensal:</label>
                            <div class="input-group">
                                <span class="currency">R$</span>
                                <input type="number" id="orcamento-total" placeholder="0,00" step="0.01" min="0">
                            </div>
                        </div>
                        <div class="orcamento-categorias">
                            <h4>OrÃ§amento por Categoria:</h4>
                            <div id="orcamento-categorias-list">
                                <!-- Categorias serÃ£o adicionadas dinamicamente -->
                            </div>
                        </div>
                        <button id="btn-salvar-orcamento" class="btn-secondary">ğŸ’¾ Salvar OrÃ§amento</button>
                    </div>
                </div>
            </div>

            <!-- ConfiguraÃ§Ãµes de conta -->
            <div class="configuracoes-conta">
                <div class="configuracoes-card">
                    <h3>âš™ï¸ ConfiguraÃ§Ãµes da Conta</h3>
                    <p>AÃ§Ãµes irreversÃ­veis que afetam todos os seus dados.</p>
                    <div class="acoes-perigosas">
                        <button id="btn-limpar-dados" class="danger">ğŸ—‘ï¸ Limpar Todos os Dados</button>
                        <p class="aviso-perigo"><small>âš ï¸ Esta aÃ§Ã£o excluirÃ¡ permanentemente todas as transaÃ§Ãµes, categorias e configuraÃ§Ãµes. NÃ£o poderÃ¡ ser desfeita!</small></p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- BotÃ£o flutuante de ajuda -->
    <button id="btn-ajuda-flutuante" class="btn-ajuda-flutuante" title="Dicas para controlar suas finanÃ§as">
        <span class="material-symbols-outlined">help</span>
    </button>

    <!-- Modal para dicas -->
    <div id="modal-ajuda" class="modal">
        <div class="modal-content modal-ajuda-content">
            <span class="close">&times;</span>
            <h3>ğŸ’¡ Dicas para Controlar Suas FinanÃ§as</h3>
            <div class="modal-ajuda-body">
                <div class="intro-card">
                    <h3>ğŸ’¡ Como controlar suas finanÃ§as</h3>
                    <p>Registre todas as suas receitas (entradas) e despesas (saÃ­das) para ter uma visÃ£o completa do seu dinheiro.</p>
                    <ul>
                        <li><strong>Entradas:</strong> SalÃ¡rio, freelas, investimentos, etc.</li>
                        <li><strong>SaÃ­das:</strong> AlimentaÃ§Ã£o, transporte, moradia, lazer, etc.</li>
                    </ul>
                </div>

                <div class="intro-card">
                    <h3>ğŸ“Š Dicas importantes</h3>
                    <ul>
                        <li>Seja especÃ­fico nas descriÃ§Ãµes (ex: "CafÃ© da manhÃ£" ao invÃ©s de "Comida")</li>
                        <li>Use categorias para agrupar gastos similares</li>
                        <li>Registre tudo! AtÃ© os pequenos gastos fazem diferenÃ§a</li>
                        <li>Revise suas transaÃ§Ãµes mensalmente para identificar padrÃµes</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para adicionar/editar transaÃ§Ã£o -->
    <div id="modal-transacao" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3 id="modal-title">Adicionar TransaÃ§Ã£o</h3>
            <form id="form-transacao">
                <input type="hidden" id="transacao-id">
                <label for="data">Data:</label>
                <div class="campo-data">
                    <input type="date" id="data" required>
                    <button type="button" id="btn-data-hoje" class="btn-data-hoje" title="Usar data de hoje">ğŸ“… Hoje</button>
                </div>
                <label for="descricao">DescriÃ§Ã£o:</label>
                <input type="text" id="descricao" required>
                <label for="categoria">Categoria:</label>
                <select id="categoria" required>
                    <!-- Categorias serÃ£o inseridas aqui -->
                </select>
                <label for="tipo">Tipo:</label>
                <select id="tipo" required>
                    <option value="entrada">Entrada</option>
                    <option value="saida">SaÃ­da</option>
                    <option value="investimento">Investimento</option>
                </select>
                <label for="valor">Valor:</label>
                <input type="number" id="valor" step="0.01" min="0" required>
                <button type="submit">Salvar</button>
            </form>
        </div>
    </div>

    <!-- Modal para adicionar/editar categoria -->
    <div id="modal-categoria" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3 id="modal-categoria-title">Adicionar Categoria</h3>
            <form id="form-categoria">
                <input type="hidden" id="categoria-id">
                <label for="nome-categoria">Nome:</label>
                <input type="text" id="nome-categoria" required>
                <button type="submit">Salvar</button>
            </form>
        </div>
    </div>

    <script src="js/storage.js"></script>
    <script src="js/transactions.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
